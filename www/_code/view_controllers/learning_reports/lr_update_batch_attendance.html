<div ng-if='selectedModule.lockedOnItem' class='fsh6'>
    You can mark attendance for this session only after all earlier items are completed.
    Please update <b>{{getItemName(selectedModule.lockedOnItem)}}</b> first.
</div>

<div ng-if='!selectedModule.lockedOnItem'>
	<div class='row row-center padding0 margin0'>
		<div class='col padding0'></div>
	
		<div ng-if='isEtmAsd && selectedModule.id == firstSessionId'
			 class='nl-link-text nl-button-lowlight padding-small'
			 ng-click='addAsdSession($event, null)'>Add session above</div>
		<div ng-if='isEtmAsd && selectedModule.id == firstSessionId' class='padding-small'></div>
	
		<div ng-if='isEtmAsd && selectedModule.asdSession'
			 class='nl-link-text nl-button-lowlight padding-small'
			 ng-click='removeAsdSession($event, selectedModule)'>Remove session</div>
		<div ng-if='isEtmAsd && selectedModule.asdSession' class='padding-small'></div>
	
		<div ng-if='isEtmAsd'
			 class='nl-link-text nl-button-highlight padding-small'
			 ng-click='addAsdSession($event, selectedModule)'>Add session</div>
		<div ng-if='isEtmAsd' class='padding-small'></div>
	
		<div ng-if='isEtmAsd' class='nl-min-200'>
			<nl-date-select fieldmodelbyref='selectedModule.sessiondate'></nl-date-select>
		</div>
		<div ng-if='isEtmAsd' class='padding-small'></div>
	
		<div class='nl-link-text nl-button-highlight' ng-click='showBulkAttendanceMarker($event)'>Mark all</div>
	</div>
	<div ng-if='selectedModule.validationErrorMsg' class='row row-center padding0 margin0'>
		<div class='col padding0'></div>
		<div class='nl-dlg-field-errormsg'> 
			{{selectedModule.dateValidationError}}
		</div>
		<div style='width:102px'></div>
	</div>

	<div ng-if='selectedModule.asdSession' class="padding-small"></div>
	<div ng-if='selectedModule.asdSession' class="row row-center margin0 padding0">
		<div class="col padding0 nl-dlg-field-value">
			<select ng-model='selectedModule.reason' 
					ng-options='opt as opt.name for opt in options.reason track by opt.id'
					ng-change='changeSessionReason($event, selectedModule)'
					class='w100'
					autofocus=''
					tabindex=""
					style='min-height: 34px'>
			</select>
		</div>
		<div class="col col-67 padding0 padding-mid-left">
			<input type='text' placeholder='Mention remarks' ng-model='selectedModule.remarks'></input>
		</div>
	</div>
	
	<div class='padding-small'>
	</div>
	<table class='nl-table nl-table-styled3'>
		<tr class='header'>
			<td style='width: 20%;'>
				Learner Name
			</td>
			<td style='width: 20%;'>
				Learner Id
			</td>
			<td style='width: 20%;'>
				Attendance Status
			</td>
			<td>
				Remarks
			</td>
		</tr>
		<tr ng-repeat='report in selectedModule.learningRecords'
			ng-show='bulkMarker.showAttendance || !report.bulkEntry'
            class='{{report.bulkEntry ? "alternate" : report.lockedMessage ? "fgrey" : ""}}'>
			<td>
				{{report.learnername}}
			</td>
			<td>
				{{report.learnerid}}
			</td>
			<td class='nl-dlg-field-value'>
				<select ng-model='report.attendance' 
					ng-if='!report.lockedMessage'
					ng-options='opt as opt.name for opt in selectedModule.attendanceOptions track by opt.id'
					autofocus=''
					tabindex='0'>
				</select>
				<div ng-if='report.bulkEntry && report.error' class='nl-dlg-field-errormsg'>
					{{report.error}}
				</div>
			</td>
			<td>
				<div ng-if='report.lockedMessage'
					 class='nl-dlg-field-value'>
					 {{report.lockedMessage}}
				</div>
				<div ng-if='!report.lockedMessage && selectedModule.attendanceRemarksOptions'
					 class='nl-dlg-field-value'>
					 <select ng-model='report.remarks' 
						ng-options='opt as opt.name for opt in selectedModule.attendanceRemarksOptions track by opt.id'
						autofocus=''
						tabindex='0'>
					</select>
				</div>
				<div ng-if='!report.lockedMessage && !selectedModule.attendanceRemarksOptions'
					 class='nl-dlg-field-value'>
					 <input ng-model='report.remarks.id' 
						autofocus=''
						tabindex='0'
						placeholder='Provide remarks'>
				</div>
				<div ng-if='!report.lockedMessage && report.validationErrorMsg' class='nl-dlg-field-errormsg'>
					{{report.validationErrorMsg}}
				</div>
				<div ng-if='report.bulkEntry' class='row row-center padding-mid margin0'>
						<div class='col padding0'></div>
					
						<div class='nl-link-text nl-button-lowlight padding-small'
							 ng-click='hideBulkAttendanceMarker($event)'>Cancel</div>
						<div class='padding-small'></div>
						<div class='nl-link-text nl-button-highlight padding-small'
							 ng-click='bulkAttendanceMarker($event)'>Mark All</div>
				</div>
			</td>
		</tr>
	</table>
</div>
