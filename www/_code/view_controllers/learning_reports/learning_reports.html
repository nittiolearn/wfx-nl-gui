<style>
.minw-number{
    width: 120px;
    min-width: 120px;
}

.minw-name{
    min-width: 300px;
}
</style>
<div class='nl-learning-report-body padding-small nl-thin-scroll' style='position:absolute; width: 100%; height: 100%'>
<div> <!-- Dummy div to solve scrolled view disappears with popup issue #701 -->
 
    <!-- **************************************************************
         Tool bar and title
    ******************************************************************* -->
    <div class='nl-topsection'>
        <div class='row row-center margin0 padding0'
            style='height: 36px; overflow: hidden; border-bottom: 1px solid rgba(0, 0, 0, 0.1)'>
            <div class='col text-center fsh6 padding-mid' style='height: 36px; overflow: hidden'>
                <span ng-show='filterStr && screenSize != "small"'>{{filterStr}}</span>
                <span ng-show='fetchInProgress' class='forange fsh6 anim fade'
                    title='Fetching the data from server. Please wait ...'>
                    <i class="icon ion-alert-circled padding-mid"></i>
                    <span class='padding-mid'>Fetching</span>
                </span>
                <span ng-show='!fetchInProgress && noDataFound' class='forange fsh6 padding-mid anim fade'
                    title='Please select the time range to fetch the reports'>
                    <i class="icon ion-alert-circled padding-mid"></i>
                    <span class='padding-mid'>Select the time range.</span>
                </span>    
                <span ng-show='!fetchInProgress && canFetchMore' class='forange fsh6 margin0 padding-mid anim fade'
                    title="Not all records are fetched from the server. Click on 'Fetch more' toolbar icon to fetch more records.">
                    <i class="icon ion-alert-circled padding-mid"></i>
                    <span class='padding-mid'>More available.</span>
                </span>
            </div>
            <span ng-repeat='tb in toolbar'
                title='{{tb.title}}'
                class='nl-toolbar-icon'
                ng-show='canShowToolbarIcon(tb.id)'
                ng-click='tb.onClick()'>
                <i class="icon {{tb.icon}}"></i>
            </span>
        </div>
        <div class='padding-small'></div>
        <div ng-show='filterStr && screenSize == "small"' class='fsh6 padding-mid anim fade'>
            {{filterStr}} 
        </div>    

        <!-- **************************************************************
            Search box
        ******************************************************************* -->
        <div>
            <div class='row row-center padding0 margin0'>
                <input class='col padding-mid' ng-model='tabData.search'
                    placeholder='{{tabData.searchPlaceholder}}'
                    ng-keydown='tabData.onSearch($event)'>
                <div class='padding-small'></div>
                <i class='nl-link-text icon fsh4 fblue padding-mid ion-ios-search'
                    ng-click='tabData.onSearch(null)'>
                </i>
            </div>
        </div>
    </div>
    <div class='padding-small'></div>
    <div class='row row-top row-stretch padding0 margin0 ' style='border-top: 1px solid #CCCCDD'>
        <!-- **************************************************************
            Left tabs
        ******************************************************************* -->
        <div style='padding-right:0px'>
            <div ng-repeat='tb in tabData.tabs'
                class='nl-link-text {{(tb.id == tabData.selectedTab.id) ? "nl-left-tab-selected" : "nl-left-tab"}}'>
                <div class='padding-mid' 
                    ng-click='tabData.onTabSelect(tb)'
                    style='position:relative'>
                    <span title='{{tb.title}}'
                        class='nl-toolbar-icon no-hover'>
                        <i class="icon {{tb.icon}}"></i>
                    </span>
                    <span ng-show='screenSize == "large"'>{{tb.name}}</span>
                </div>
            </div>
        </div>
        <!-- **************************************************************
            Content area
        ******************************************************************* -->
        <div class='col nl-left-tabbed-content sandbox padding0' style='overflow: auto; height: {{getContTabHeight($event)}}px'>
            <!-- **************************************************************
                Overview tab
            ******************************************************************* -->
            <div  ng-if='tabData.nothingToDisplay'
                class='anim-enter fade fsh5 padding'>
                No data is available to display.
            </div>
            <!-- **************************************************************
                Overview tab
            ******************************************************************* -->
            <div  ng-if='tabData.selectedTab.id == "overview" && !tabData.processingOnging'
                class='anim-enter1 flyfrom-l'>
                <div class='row row-center row-wrap row-justify-evenly text-center padding0 margin0' >
                    <div ng-class='$root.respCol331' style='width: 100%'>
                        <nl-summary-box number='overviewArray[0].perc' 
                            title='overviewArray[0].title' 
                            class='col padding0 small-summary-box'
                            desc='overviewArray[0].desc'
                            showperc='overviewArray[0].showperc'
                            boxclass='"bgdefault"'>
                        </nl-summary-box>
                    </div>
                    <div ng-class='$root.respCol331' style='width: 100%'>
                        <nl-summary-box number='overviewArray[1].perc' 
                            title='overviewArray[1].title' 
                            class='col padding0 small-summary-box'
                            desc='overviewArray[1].desc'
                            showperc='overviewArray[1].showperc'
                            boxclass='"bgdefault"'>
                        </nl-summary-box>
                    </div>
                    <div ng-class='$root.respCol331' style='width: 100%'>
                        <nl-summary-box number='overviewArray[2].perc' 
                            title='overviewArray[2].title' 
                            class='col padding0 small-summary-box'
                            desc='overviewArray[2].desc'
                            showperc='overviewArray[2].showperc'
                            boxclass='"bgdefault"'>
                        </nl-summary-box>
                    </div>
                    <div ng-class='$root.respCol331' style='width: 100%'>
                        <nl-summary-box number='overviewArray[3].perc' 
                            title='overviewArray[3].title' 
                            class='col padding0 small-summary-box'
                            desc='overviewArray[3].desc'
                            showperc='overviewArray[3].showperc'
                            boxclass='"bgdefault"'>
                        </nl-summary-box>
                    </div>
                    <div ng-class='$root.respCol331' style='width: 100%'>
                        <nl-summary-box number='overviewArray[4].perc' 
                            title='overviewArray[4].title' 
                            class='col padding0 small-summary-box'
                            desc='overviewArray[4].desc'
                            showperc='overviewArray[4].showperc'
                            boxclass='"bgdefault"'>
                        </nl-summary-box>
                    </div>
                    <div ng-class='$root.respCol331' style='width: 100%'>
                        <nl-summary-box number='overviewArray[5].perc' 
                            title='overviewArray[5].title' 
                            class='col padding0 small-summary-box'
                            desc='overviewArray[5].desc'
                            showperc='overviewArray[5].showperc'
                            boxclass='"bgdefault"'>
                        </nl-summary-box>
                    </div>
                </div>
                <div class='row row-top row-wrap margin0 padding0'>
                    <div ng-class='$root.respCol221' class='text-center padding-mid'>
                        <div class='padding-small'></div>
                        <div class='fsh5 padding-mid'>{{charts[0].title}}</div>
                        <div class='padding-small'></div>
                        <div>
                            <canvas class='chart chart-doughnut'
                                    height='250'
                                    width='250'
                                    chart-data='charts[0].data'
                                    chart-labels='charts[0].labels'
                                    chart-colours='charts[0].colors'
                                    chart-series='charts[0].series'
                                    chart-options='charts[0].options'>
                            </canvas>
                        </div>
                    </div>
                    <div ng-class='$root.respCol221' class='text-center padding-mid'>
                        <div class='padding-small'></div>
                        <div class='fsh5 padding-mid'>{{charts[1].title}}</div>
                        <div class='padding-small'></div>
                        <div on-load="chartsOnLoad()">
                            <canvas class='chart chart-bar'
                                    height='300'
                                    width='450'
                                    chart-data='charts[1].data'
                                    chart-labels='charts[1].labels'
                                    chart-colours='charts[1].colors'
                                    chart-series='charts[1].series'
                                    chart-options='charts[1].options'>
                            </canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- **************************************************************
                Learning records tab
            ******************************************************************* -->
            <div ng-if='tabData.selectedTab.id == "learningrecords" && !tabData.processingOnging'
                class='anim-enter1 flyfrom-l padding-mid'>
                <nl-table info='utable'></nl-table>
            </div>

            <!-- **************************************************************
                Org tab
            ******************************************************************* -->
            <div ng-if='tabData.selectedTab.id == "organisations" && !tabData.processingOnging'
                class='anim-enter1 flyfrom-l padding-mid'>
                <nl-table info='otable'></nl-table>
            </div>

            <!-- **************************************************************
                Time Summary tab
            *******************************************************************-->
            <div ng-if='tabData.selectedTab.id == "timesummary"  && !tabData.processingOnging'
                class='anim-enter1 flyfrom-l padding-mid'>
                <div ng-repeat='timeSummaryChart in timeSummaryCharts'>
                    <div class='padding-small'></div>
                    <div class='fsh5 padding-mid'>{{timeSummaryChart.title}}</div>
                    <div ng-if='timeSummaryChart.subtitle' class='fgrey padding-mid'><i>({{timeSummaryChart.subtitle}})</i></div>
                    <div class='padding-small'></div>
                    <div style='overflow-x: {{timeSummaryChart.data[0].length > 50 ? "scroll" : "none"}};'>
                        <div style='width: {{(timeSummaryChart.data[0].length > 50) ? "200": (timeSummaryChart.data[0].length > 120) ? "300" : ""}}%'>
                            <canvas class='chart chart-bar'
                                    height='300'
                                    width='100%'
                                    chart-data='timeSummaryChart.data'
                                    chart-labels='timeSummaryChart.labels'
                                    chart-colours='timeSummaryChart.colors'
                                    chart-series='timeSummaryChart.series'
                                    chart-options='timeSummaryChart.options'>
                            </canvas>
                        </div>
                    </div>
                </div>
            </div>
            <!-- **************************************************************
                Courses tab
            ******************************************************************* -->
            <div ng-if='debug && tabData.selectedTab.id == "orglevelsummary"  && !tabData.processingOnging'
                class='anim-enter1 flyfrom-l' style='width: {{checkOverflow($event) ? "fit-content" : ""}}'>
                <div class='margin0 padding0' style='padding-bottom: 3px; width'>
                    <div class='row row-center margin0 padding-small' style='background-color: #0083AC; color: #ffffff'>
                        <div class='col minw-name'><b>Course or org name</b></div>
                        <div class='minw-number text-center'><b>Active Assignments</b></div>
                        <div ng-show='screenSize != "small"' class='minw-number text-center'><b>Certified</b></div>
                        <div ng-show='screenSize != "small"' class='minw-number text-center'><b>Failed</b></div>
                        <div class='minw-number text-center'><b>Pending</b></div>
                        <div ng-show='screenSize != "small"' class='minw-number text-center'><b>Average Score</b></div>
                        <div ng-show='screenSize != "small"' class='minw-number text-center'><b>Total Time Spent (mins)</b></div>
                    </div>
                </div>
                <div class='margin0 padding0 anim-enter1 flyfrom-l' ng-repeat='course in orgLevelSummaryArray' style='padding-bottom: 3px'>
                    <div class='row row-center nl-bg-blue nl-link-text padding-small'
                        ng-click='course.showChildren = !course.showChildren'>
                        <div class='col minw-name'>
                            <div class='row row-center magin0 padding0'>
                                <span class='padding-small'>
                                    <i ng-hide='course.showChildren' class="icon ion-arrow-right-b bold fsh5"></i>
                                    <i ng-show='course.showChildren' class="icon ion-arrow-down-b bold fsh5"></i>
                                </span>
                                <div class='col'>{{course.name}}</div>
                                <span ng-click='onDetailsClick($event, course); $event.stopImmediatePropagation()' class='nl-link-img'>
                                    <i class="padding-mid icon ion-more fsh3"></i>
                                </span> 
                            </div>
                        </div>
                        <div class='minw-number text-center'>{{course.active}}</div>
                        <div ng-show='screenSize != "small"' class='minw-number text-center'>{{course.certified}}<span style='font-size: 85%; color:rgba(0, 0, 0, 0.5)'>({{course.certifiedPerc}}%)</span></div>
                        <div ng-show='screenSize != "small"' class='minw-number text-center'>{{course.failed}}<span style='font-size: 85%; color:rgba(0, 0, 0, 0.5)'>({{course.failedPerc}}%)</span></div>
                        <div class='minw-number text-center'>{{course.pending}}<span style='font-size: 85%; color:rgba(0, 0, 0, 0.5)'>({{course.pendingPerc}}%)</span></div>
                        <div ng-show='screenSize != "small"' class='minw-number text-center'>{{getAvgScore(course)}}%</div>
                        <div ng-show='screenSize != "small"' class='minw-number text-center'>{{getTimeSpentInMins(course)}}</div>
                    </div>
                    <div class='padding0 margin0 anim-enter1 flyfrom-l' ng-repeat='org in course.orgItems' ng-show='course.showChildren'>
                        <div class='row row-center {{org.ouItems ? "nl-link-text" : ""}} padding-small' ng-click='org.ouOpen = !org.ouOpen'>
                            <div class='col minw-name '>
                                <div class='row row-center magin0 padding0'>
                                    <div style='padding:8px; width: 12px'></div>
                                    <span ng-show='org.ouItems' class='padding-small'>
                                        <i ng-hide='org.ouOpen' class="icon ion-arrow-right-b bold fsh5"></i>
                                        <i ng-show='org.ouOpen' class="icon ion-arrow-down-b bold fsh5"></i>
                                    </span>
                                    <div class='col'>{{org.name}}</div>
                                    <span ng-click='onDetailsClick($event, org); $event.stopImmediatePropagation()' class='nl-link-img'>
                                        <i class="padding-mid icon ion-more fsh3"></i>
                                    </span>
                                </div>
                            </div>
                            <div class='minw-number text-center'>{{org.active}}</div>
                            <div ng-show='screenSize != "small"' class='minw-number text-center'>{{org.certified}}<span style='font-size: 85%; color:rgba(0, 0, 0, 0.5)'>({{org.certifiedPerc}}%)</span></div>
                            <div ng-show='screenSize != "small"' class='minw-number text-center'>{{org.failed}}<span style='font-size: 85%; color:rgba(0, 0, 0, 0.5)'>({{org.failedPerc}}%)</span></div>
                            <div class='minw-number text-center'>{{org.pending}}<span style='font-size: 85%; color:rgba(0, 0, 0, 0.5)'>({{org.pendingPerc}}%)</span></div>
                            <div ng-show='screenSize != "small"' class='minw-number text-center'>{{getAvgScore(org)}}%</div>
                            <div ng-show='screenSize != "small"' class='minw-number text-center'>{{getTimeSpentInMins(org)}}</div>
                        </div>
                        <div class='padding0 margin0' ng-show='org.ouItems && org.ouOpen' ng-repeat='ou in org.ouItems'>
                            <div class='row row-center padding-small' style='color:#000077'>
                                <div class='col minw-name '>
                                    <div class='row row-center magin0 padding0'>
                                        <div style='padding:8px; width: 32px'></div>
                                        <span class='padding-small'>
                                            <i class="icon ion-person-stalker bold fsh5"></i>
                                        </span>
                                        <div class='col'>{{ou.name}}</div>
                                        <span ng-click='onDetailsClick($event, ou); $event.stopImmediatePropagation()' class='nl-link-img'>
                                            <i class="padding-mid icon ion-more fsh3"></i>
                                        </span>
                                    </div>
                                </div>
                                <div class='minw-number text-center'>{{ou.active}}</div>
                                <div ng-show='screenSize != "small"' class='minw-number text-center'>{{ou.certified}}<span style='font-size: 85%; color:rgba(0, 0, 0, 0.5)'>({{ou.certifiedPerc}}%)</span></div>
                                <div ng-show='screenSize != "small"' class='minw-number text-center'>{{ou.failed}}<span style='font-size: 85%; color:rgba(0, 0, 0, 0.5)'>({{ou.failedPerc}}%)</span></div>
                                <div class='minw-number text-center'>{{ou.pending}}<span style='font-size: 85%; color:rgba(0, 0, 0, 0.5)'>({{ou.pendingPerc}}%)</span></div>
                                <div ng-show='screenSize != "small"' class='minw-number text-center'>{{getAvgScore(ou)}}%</div>
                                <div ng-show='screenSize != "small"' class='minw-number text-center'>{{getTimeSpentInMins(ou)}}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> <!-- Dummy div to solve scrolled view disappears with popup issue #701 -->
</div>
