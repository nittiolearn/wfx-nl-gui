<div class='row row-center padding-0 margin0'>
    <div class='col padding-mid fsh4'>Mark  the learner ratings for {{selecteditem.name}}</div>
    <div class='nl-link-text nl-button-highlight' ng-click='bulkRatingMarker($event)'>Mark all</div>
</div>

<table class='nl-table' style='min-width: 600px'>
    <tr>
        <th>Learner Name</th>
        <th>Learner Id</th>
        <th style='width: 200px; min-width: 150px'>Rating</th>
        <th>Remarks</th>
    </tr>
    <tr class='{{(user.attrition || user.canRate !== "attended") ? "fgrey" : "nl-link-text"}}'
        ng-repeat='user in selecteditem.rating'>
        <td>{{user.name}}</td>
        <td class='fsmall1'>{{user.userid}}</td>
        <td style='width: 200px; min-width: 150px'>
            <div ng-if='!user.attrition && user.canRate == "attended" && selecteditem.ratingType === "select"'>
                <select ng-model='user.rating'
                        ng-options='opt as opt.name for opt in selecteditem.ratingOptions track by opt.id'
                        class='{{fieldcls}}'
                        autofocus=''
                        tabindex="{{tabindex}}"
                        style='min-height: 34px'
                        placeholder='"Write remarks"'>
                </select>
            </div>
            <div ng-if='!user.attrition && user.canRate == "attended" && selecteditem.ratingType === "input"'>
                <input type='number' ng-model='user.rating' min='0' max='100'></input>
            </div>
            <div ng-if='user.attrition'>{{user.attritionStr || user.disableMarkingStr}}</div>
            <div ng-if='user.canRate !== "attended" && !user.attrition'>{{user.errorStr}}</div>
        </td>
        <td>
            <div ng-if='!user.remarkOptions && !user.attrition && user.canRate === "attended"'>
                <input type='text' ng-model='user.remarks' placeholder='Mention remarks for learner'></input>
            </div>
            <div ng-if='user.remarkOptions && !user.attrition && user.canRate === "attended"'>
                <div class='row row-center padding0 margin0 marker-dropbtn nl-link-text2' ng-click='user.canShow = !user.canShow'>
                    <div class='col' style='max-height: 28px;text-overflow: ellipsis;overflow: hidden;line-height: 20px'>
                        <span>{{user.remarks}}</span>
                    </div>
                    <span class="nl-link-text">
                        <i ng-if='!user.canShow' class='icon ion-chevron-down fsh5 padding-mid'></i>
                        <i ng-if='user.canShow' class='icon ion-chevron-up fsh5 padding-mid'></i>
                    </span>
                </div>
                <div ng-if='user.canShow' class="marker-select-dropdown">
                    <div ng-repeat='item in user.remarkOptions track by $index' class='nl-link-text2' style='border-bottom: 2px solid #FFFFFF;padding: 2px 8px;'>
                        <div class='row row-center margin0 padding0' ng-click='onDropdownItemSelected(user, item)'>
                            <span title='Select the remark {{$index+1}}'>
                                <i ng-if='item.selected' class="icon ion-android-checkbox-outline"></i>
                                <i ng-if='!item.selected' class="icon ion-android-checkbox-outline-blank"></i>
                            </span>
                            <div class='col'>
                                {{item.name}}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </td>
    </tr>
</table>