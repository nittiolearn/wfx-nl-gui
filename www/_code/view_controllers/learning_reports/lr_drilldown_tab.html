<div ng-show='drilldowndata.tabs' 
    class='row row-wrap row-stretch margin0 padding0 text-center page_format_tab_not_selected'
    style='height:34px'>
    <div style='width:36px'>
        <span class='padding-small nl-link-text' title='Customize Drilldown'
            ng-click='updatePivotTable()'>
            <i class="icon ion-gear-b bold fsh3"></i>
        </span>
    </div>
    <div class='nl-min-250 padding-mid {{(drilldowndata.selectedtab.id == tab.id) ? "page_format_tab_selected" : ""}} nl-link-text'
        ng-click='changeTab(drilldowndata, tab)'
        ng-repeat='tab in drilldowndata.tabs'>
        {{tab.name}}
    </div>
</div>

<div ng-if='drilldowndata.selectedtab.id == "charts"'
    class='anim-enter {{getAnimClass("charts")}}'>
    <div class='row row-center text-center margin0 padding0'>
        <div class='col'></div>
        <div class='col col-80' style='width: 100%; max-width: 900px;min-width: 300px;''>
            <div class='padding-small'></div>
            <div class='row row-center margin0 padding0 text-left'>
                <div class='col fsh5 padding-mid nl-dkonlg-lgondk-text'>
                    {{drilldowndata.charts.selectedChart.title}}
                </div>
                <div>
                    <nl-navigation-section data="drilldowndata.charts.selectedChart" options='drilldowndata.charts.options'></nl-navigation-section>
                </div>
                <div class='padding-mid'>
                </div>
            </div>
            <div class='padding-small'></div>
            <div style='width: auto; height: {{drilldowndata.charts.selectedChart.data[0].length > 3 ?  drilldowndata.charts.selectedChart.data[0].length*45 : 200}}px'>
                <canvas class="chart chart-horizontal-bar ng-isolate-scope" 
                        chart-data="drilldowndata.charts.selectedChart.data" 
                        chart-labels="drilldowndata.charts.selectedChart.labels" 
                        chart-options="drilldowndata.charts.selectedChart.options" 
                        chart-series="drilldowndata.charts.selectedChart.series"
                        chart-colors="drilldowndata.charts.selectedChart.colors"
                        chart-dataset-override="drilldowndata.charts.selectedChart.dataOverride">
                </canvas>
            </div>    
        </div>
        <div class='col'></div>
    </div>
</div>
<div class='padding-mid anim-enter {{getAnimClass("data")}}' ng-if='drilldowndata.selectedtab.id == "data"'>
    <table class='nl-table nl-table-styled3 rowlines'>
        <tr class='header'>
            <td class='minw-name'>
                <div class='row row-center magin0 padding0'>
                    <div class='col'></div>
                </div>
            </td>
            <td ng-repeat='col in drilldowndata.drilldown.columns track by $index'
                class='minw-number text-center' ng-if='($root.screenSize != "small" && col.table) || ($root.screenSize == "small" && col.smallScreen)'>
                <div>{{col.name}}</div>
            </td>
        </tr>
        <tr class='{{rec.isFolder ? "clickable hover" : ""}}'
             ng-repeat='rec in drilldowndata.drilldown.rows track by $index'
             ng-click='generateDrillDownArray(rec)'>
             <td>
                <div ng-if='rec.showMoreLink' class='minw-name fgrey td-cell-clickable td-cell-hover'
                    ng-click='onClickOnShowMore(rec);$event.stopImmediatePropagation(); $event.preventDefault();'>
                    <div class='row row-center magin0 padding0'style='padding-left:{{rec.indentation}}px' >
                        <div class='col'  style='padding-left:{{24+rec.cnt.indentation}}px'>Show more</div>
                        <span class='nl-link-text'>
                            <i class="padding-mid icon ion-chevron-down fsh4 nl-info-icon"></i>
                        </span> 
                    </div>
                </div>

                <div ng-if='!rec.showMoreLink'
                    class='row row-center magin0 padding0'style='padding-left:{{rec.indentation}}px' >
                    <span class='padding-small' ng-show='rec.isFolder'>
                        <i ng-hide='rec.isOpen' class="icon ion-arrow-right-b bold fsh5"></i>
                        <i ng-show='rec.isOpen' class="icon ion-arrow-down-b bold fsh5"></i>
                    </span>
                    <div class='col'>{{rec.orgname || rec.name}}</div>
                    <span ng-click='onDetailsClick($event, rec, drilldowndata.drilldown.columns)' class='nl-link-text'>
                        <i class="padding-mid icon ion-information-circled fsh4 nl-info-icon"></i>
                    </span> 
                </div>
            </td>
            <td ng-repeat='col in drilldowndata.drilldown.columns track by $index'
                class='minw-number text-center'  ng-if='($root.screenSize != "small" && col.table) || ($root.screenSize == "small" && col.smallScreen)'>
                <div class='row row-center {{!col.hidePerc ? "text-right" : "text-center"}}'>
                    <div class='col'>{{rec[col.id] ? rec[col.id] : rec.showMoreLink ? '' : '-'}}</div>
                    <div class='col nl-perc-class text-left' ng-if='!col.hidePerc'>{{(col.percid && rec[col.percid]) ? rec[col.percid]+'%' : ''}}</div>
                </div>
            </td>
        </tr>
    </table>
</div>
