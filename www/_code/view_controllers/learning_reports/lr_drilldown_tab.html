<div ng-if='drilldown.showCharts'
    style='width:97vw'>
    <div class='row row-center text-center margin0 padding0'>
        <div class='col'>
            <div class='padding-small'></div>
            <div class='fsh5 padding-mid'>{{drilldown.charts.title}}</div>
            <div class='padding-small'></div>
            <div style='width:100%'>
                <div style='display:block;margin: auto; width:70%;min-height: 200px;'>
                    <canvas class="chart chart-horizontal-bar ng-isolate-scope" 
                            chart-data="drilldown.charts.data" 
                            chart-labels="drilldown.charts.labels" 
                            chart-options="drilldown.charts.options" 
                            chart-series="drilldown.charts.series"
                            chart-colors="drilldown.charts.colors">
                    </canvas>
                </div>
            </div>
            <div class='padding-small'></div>    
        </div>
    </div>
</div>
<div class='padding-mid'>
    <table class='nl-table nl-table-styled3 rowlines'>
        <tr class='header'>
            <td class='minw-name'>
                <div class='row row-center magin0 padding0'>
                    <span class='padding-small nl-link-text' title='Customize Drilldown'
                        ng-click='updatePivotTable()'>
                        <i class="icon ion-gear-b bold fsh3"></i>
                    </span>
                    <span class='padding-small nl-link-text' title='Show charts'
                        ng-click='drilldown.showCharts = !drilldown.showCharts'>
                        <i class="icon ion-pie-graph bold fsh3"></i>
                    </span>
                    <div class='col'></div>
                    <span class='nl-link-img'>
                    </span> 
                </div>
            </td>
            <td ng-repeat='col in drilldown.columns track by $index'
                class='minw-number text-center' ng-if='($root.screenSize != "small" && col.table) || ($root.screenSize == "small" && col.smallScreen)'>
                <div>{{col.name}}</div>
            </td>
        </tr>
        <tr class='{{rec.isFolder ? "clickable hover" : ""}}'
             ng-repeat='rec in drilldown.rows track by $index'
             ng-click='generateDrillDownArray(rec)'>
            <td class='minw-name'>
                <div class='row row-center magin0 padding0'style='padding-left:{{rec.indentation}}px' >
                    <span class='padding-small' ng-show='rec.isFolder'>
                        <i ng-hide='rec.isOpen' class="icon ion-arrow-right-b bold fsh5"></i>
                        <i ng-show='rec.isOpen' class="icon ion-arrow-down-b bold fsh5"></i>
                    </span>
                    <div class='col'>{{rec.orgname || rec.name}}</div>
                    <span ng-click='onDetailsClick($event, rec, drilldown.columns)' class='nl-link-text'>
                        <i class="padding-mid icon ion-information-circled fsh4 nl-info-icon"></i>
                    </span> 
                </div>
            </td>
            <td ng-repeat='col in drilldown.columns track by $index'
                class='minw-number text-center'  ng-if='($root.screenSize != "small" && col.table) || ($root.screenSize == "small" && col.smallScreen)'>
                <div class='row row-center {{!col.hidePerc ? "text-right" : "text-center"}}'>
                    <div class='col'>{{rec[col.id] || '-'}}</div>
                    <div class='col nl-perc-class text-left' ng-if='!col.hidePerc'>{{(col.percid && rec[col.percid]) ? rec[col.percid]+'%' : ''}}</div>
                </div>
            </td>
        </tr>
    </table>
</div>
