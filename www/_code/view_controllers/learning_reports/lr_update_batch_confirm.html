<div class='padding-mid fsh4 forange2'>
    Below changes will be saved to the server. Press <b>Update</b> again to proceed and <b>Cancel</b> to make further changes.
</div>

<div class='padding-mid' ng-repeat='change in changes'>
    <div class='padding-mid-v'>
        <span class='fsh5'>{{getItemName(change.cm)}}</span> 
        <span> -  {{change.type}}</span>
    </div>

    <div ng-if='change.cmChanges'>
        <div class='padding-mid-v' ng-repeat='cmChange in change.cmChanges'>
            <b>{{cmChange.attr}}</b> 
            <span>: {{cmChange.val}}</span>
        </div>
    </div>

    <table ng-if='change.lrChanges' class='nl-table nl-table-styled3'>
        <tr>
            <th style='width: 20%;'>
                Learner Name
            </th>
            <th style='width: 20%;'>
                Learner Id
            </th>
            <th style='width: 20%;'>
                <span ng-if='change.cm.type == "iltsession"'>Attendance Status</span>
                <span ng-if='change.cm.type == "rating"'>Rating</span>
                <span ng-if='change.cm.type == "milestone"'>Milestone Status</span>
            </th>
            <th>
                Remarks
            </th>
        </tr>
        <tr ng-repeat='lrChange in change.lrChanges'>
            <td>
                {{lrChange.lr.learnername}}
            </td>
            <td>
                {{lrChange.lr.learnerid}}
            </td>
            <td>
                <span ng-if='change.cm.type == "iltsession"'>{{lrChange.lr.attendance.name}}</span>
                <span ng-if='change.cm.type == "rating" && change.cm.ratingType !== "input"'>{{lrChange.lr.rating.name}}</span>
                <span ng-if='change.cm.type == "rating" && change.cm.ratingType === "input"'>{{lrChange.lr.rating.id}}</span>
                <span ng-if='change.cm.type == "milestone"'>{{lrChange.lr.milestoneMarked ? 'Reached' : ''}}</span>
            </td>
            <td>
                <div ng-if='change.cm.type == "iltsession"'>{{lrChange.lr.remarks.id}}</div>
                <div ng-if='change.cm.type == "rating"'>{{lrChange.lr.remarksStr}}</div>
                <div ng-if='change.cm.type == "rating" && lrChange.lr.showOtherRemarks'
                     class='padding-mid-v fsmall2'>{{lrChange.lr.otherRemarks}}</div>
                <div ng-if='change.cm.type == "milestone"'>{{lrChange.lr.remarks}}</div>
            </td>
        </tr>
    </table>
</div>
