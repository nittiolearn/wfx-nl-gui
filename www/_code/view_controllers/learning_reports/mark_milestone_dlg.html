<nl-dlg dlgTitle='Mark milestone' show-help='0'>
<nl-dlg-content>

<div class='row row-top row-stretch padding0 margin0'>
	<div class='col' style='padding-right:0px; max-width: 250px'>
		<div class='padding-mid fsh4'>Milestone</div>
		<div ng-repeat='milestone in milestones'
			class='nl-link-text {{milestone.id == selectedItem.id ? "nl-left-tab-selected" : "nl-left-tab"}} padding-small'>
			<div class='padding-mid' 
				ng-click='onClick(milestone)'
				style='position:relative'>
				{{milestone.name}}
			</div>
		</div>
	</div>
	<div class='col nl-left-tabbed-content'>
		<div class='row row-center padding-0 margin0'>
			<div class='col padding-mid fsh4'>Update status for {{selectedItem.name}}</div>
		</div>
		<div class='row row-top padding-mid margin0 row-wrap'>
			<div class='col'>
				<textarea placeholder='Provide your remarks for this milestone' ng-model='selectedItem.milestoneObj.comment' rows='3'></textarea>
			</div>
		</div>
		<div ng-show='selectedItem.canMarkMilestone && !selectedItem.error' class='row row-top padding-mid margin0 row-wrap'>
			<div class='col'>
				<span ng-click='selectedItem.milestoneObj.status = !selectedItem.milestoneObj.status;' class='nl-link-text'>
					<i ng-show='selectedItem.milestoneObj.status' class="icon ion-android-checkbox-outline black"></i>
					<i ng-hide='selectedItem.milestoneObj.status' class="icon ion-android-checkbox-outline-blank black"></i>
					<span>Check this to mark milestone as completed</span>
				</span>
			</div>
		</div>
		<div ng-show='selectedItem.error' class='padding-mid' style='line-height: 175%'>
			You cannot mark this milestone as completed as the milestone <b>{{selectedItem.error}}</b>. is not marked as reached.
		</div>
		<div ng-show='!selectedItem.error && !selectedItem.canMarkMilestone' style='line-height: 175%'> 
			<div class='padding-mid'>
				You cannot mark this milestone as completed as below prerequisites are not met:
			</div>
			<ul class='padding-mid'>
				<li ng-repeat='name in selectedItem.pendingIlts'>
					Attendance is not marked for all learners for <b>{{name}}</b>
				</li>
				<li ng-repeat='name in selectedItem.pendingRatings'>
					Ratings are not provided for all learners for items <b>{{name}}</b>
				</li>
			</ul>
		</div>
		<div ng-if='selectedItem.milestoneObj.status' >
			<div class='row row-center row-wrap padding-0 margin0'>
				<div ng-class='respCol211'> 
					<div class='padding-mid fsh6'>Mark  the learner milestone</div>
				</div>
				<div ng-class='respCol211'> 
					<div class='row row-center margin0 padding0'>
						<div class='col'></div>
						<div class='nl-link-text nl-button-highlight' ng-click='markOrUnmarkAll(selectedItem, true)'>Mark all</div>
						<span class='padding-small'></span>
						<div class='nl-link-text nl-button-highlight' ng-click='markOrUnmarkAll(selectedItem, false)'>Unmark all</div>
					</div>
				</div>
			</div>
			<div class='row padding0 margin0' ng-repeat='user in selectedItem.learnersList'>
				<div class='row padding0 margin0 row-wrap {{user.attrition ? "fgrey" : ""}}'>
					<div ng-class='respCol211' class='padding-mid'>
						<div class='row row-center padding0 margin0'>
							<div class='col {{!user.attrition ? "nl-link-text" : "fgrey"}}' ng-click='toggleLearnerMilestone(user)'>
								<span ng-if='!user.attrition'>
									<i ng-show='user.marked' class="icon ion-android-checkbox-outline black"></i>
									<i ng-hide='user.marked' class="icon ion-android-checkbox-outline-blank black"></i>
								</span>
								{{user.name}} 
								<span class='fgrey'>({{user.userid}})</span>
							</div>
						</div>
					</div>
					<div ng-if='!user.attrition' ng-class='respCol211' class='padding-mid'>
						<input type='text' ng-model='user.remarks' placeholder='Mention remarks for learner'></input>
					</div>
					<div ng-class='respCol211' ng-if='user.attrition' class='padding-mid fgrey'>
						<div class='padding-mid'>{{user.attritionStr}}</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
</nl-dlg-content>
</nl-dlg>