<nl-dlg dlgTitle='Mark milestone' show-help='0'>
<nl-dlg-content>

<div class='row row-top row-stretch padding0 margin0'>
	<div class='col' style='padding-right:0px; max-width: 250px'>
		<div class='padding-mid fsh4'>Milestone</div>
		<div ng-repeat='milestone in milestones'
			class='nl-link-text {{milestone.id == selectedItem.id ? "nl-left-tab-selected" : "nl-left-tab"}} padding-small'>
			<div class='padding-mid' 
				ng-click='onClick(milestone)'
				style='position:relative'>
				{{milestone.name}}
			</div>
		</div>
	</div>
	<div class='col nl-left-tabbed-content'>
		<div class='row row-center padding-0 margin0'>
			<div class='col padding-mid fsh4'>Update status for {{selectedItem.name}}</div>
		</div>
		<div class='row row-top padding-mid margin0 row-wrap'>
			<div class='col'>
				<textarea placeholder='Provide your remarks for this milestone' ng-model='selectedItem.milestoneObj.comment' rows='3'></textarea>
			</div>
		</div>
		<div ng-show='selectedItem.canMarkMilestone && !selectedItem.error' class='row row-top padding-mid margin0 row-wrap'>
			<div class='col'>
				<span ng-click='selectedItem.milestoneObj.status = !selectedItem.milestoneObj.status;' class='nl-link-text'>
					<i ng-show='selectedItem.milestoneObj.status' class="icon ion-android-checkbox-outline black"></i>
					<i ng-hide='selectedItem.milestoneObj.status' class="icon ion-android-checkbox-outline-blank black"></i>
					<span>Check this to mark milestone as completed</span>
				</span>
			</div>
		</div>
		<div ng-show='selectedItem.error' class='padding-mid' style='line-height: 175%'>
			You cannot mark this milestone as completed as the milestone <b>{{selectedItem.error}}</b>. is not marked as reached.
		</div>
		<div ng-show='!selectedItem.error && !selectedItem.canMarkMilestone' style='line-height: 175%'> 
			<div class='padding-mid'>
				You cannot mark this milestone as completed as below prerequisites are not met:
			</div>
			<ul class='padding-mid'>
				<li ng-repeat='name in selectedItem.pendingIlts'>
					Attendance is not marked for all learners for <b>{{name}}</b>
				</li>
				<li ng-repeat='name in selectedItem.pendingRatings'>
					Ratings are not provided for all learners for items <b>{{name}}</b>
				</li>
			</ul>
		</div>
		<div ng-if='selectedItem.milestoneObj.status && selectedItem.canMarkMilestone'>
			<mark-milestone-tab selecteditem='selectedItem' readonly='false'></mark-milestone-tab>
		</div>
	</div>
</div>
</nl-dlg-content>
</nl-dlg>