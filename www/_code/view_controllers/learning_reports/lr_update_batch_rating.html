<div ng-if='selectedModule.lockedOnItem' class='fsh6'>
    You can update the rating only after all earlier items are completed.
    Please update <b>{{getItemName(selectedModule.lockedOnItem)}}</b> first.
</div>

<div ng-if='!selectedModule.lockedOnItem'>
    <div class='row row-center padding0 margin0'>
        <div class='col padding0'></div>
        <div class='nl-link-text nl-button-highlight' ng-click='showBulkRatingMarker($event)'>Mark all</div>
    </div>
    
    <div class='padding-small'>
    </div>
    <table class='nl-table nl-table-styled3'>
        <tr class='header'>
            <td style='width: 20%;'>
                Learner Name
            </td>
            <td style='width: 20%;'>
                Learner Id
            </td>
            <td style='width: 20%;'>
                Rating
            </td>
            <td ng-hide='selectedModule.hideRemarks'>
                Remarks
            </td>
        </tr>
        <tr ng-repeat='report in selectedModule.learningRecords'
            ng-show='bulkMarker.showRating || !report.bulkEntry'
            class='{{report.bulkEntry ? "alternate" : report.lockedMessage ? "fgrey" : ""}}'>
            <td>
                {{report.learnername}}
            </td>
            <td>
                {{report.learnerid}}
            </td>
            <td class='nl-dlg-field-value'>
                <select ng-model='report.rating'
                    ng-if='!report.lockedMessage && selectedModule.ratingType === "select"'
                    ng-options='opt as opt.name for opt in selectedModule.ratingOptions track by opt.id'
                    autofocus=''
                    tabindex='0'>
                </select>
                <input ng-if='!report.lockedMessage && selectedModule.ratingType === "input"'
                    type='number' ng-model='report.rating.id' min='0' max='100'></input>
                <div ng-if='!report.bulkEntry && report.lockedMessage'> {{report.lockedMessage}} </div>
                <div ng-if='report.bulkEntry && report.error' class='nl-dlg-field-errormsg'>
                    {{report.error}}
                </div>
                <div ng-if='selectedModule.hideRemarks && report.bulkEntry' class='row row-center padding-mid margin0'>
                    <div class='col padding0'></div>                    
                    <div class='nl-link-text nl-button-lowlight padding-small'
                        ng-click='hideBulkRatingMarker($event)'>Cancel</div>
                    <div class='padding-small'></div>
                    <div class='nl-link-text nl-button-highlight padding-small'
                        ng-click='bulkRatingMarker($event)'>Mark All</div>
                </div>

            </td>
            <td ng-hide='selectedModule.hideRemarks'>
                <div ng-if='report.lockedMessage'
                     class='nl-dlg-field-value'>
                     {{report.lockedMessage}}
                </div>
                <div ng-if='!report.lockedMessage && report.ratingRemarksOptions'
                     class='nl-dlg-field-value'>
                    <div class='row row-center padding0 margin0 marker-dropbtn nl-link-text2' ng-click='report.showRatingsOptions = !report.showRatingsOptions'>
                        <div class='col' style='max-height: 28px;text-overflow: ellipsis;overflow: hidden;line-height: 20px'>
                            <span>{{report.remarksStr}}</span>
                        </div>
                        <span class="nl-link-text">
                            <i ng-if='!report.showRatingsOptions' class='icon ion-chevron-down fsh5 padding-mid'></i>
                            <i ng-if='report.showRatingsOptions' class='icon ion-chevron-up fsh5 padding-mid'></i>
                        </span>
                    </div>
                    <div ng-if='report.showRatingsOptions' class="marker-select-dropdown">
                        <div ng-repeat='opt in report.ratingRemarksOptions track by $index' class='nl-link-text2' style='border-bottom: 2px solid #FFFFFF;padding: 2px 8px;'>
                            <div class='row row-center margin0 padding0' ng-click='onRatingRemarksClick($event, report, opt)'>
                                <span title='Select the remark {{$index+1}}'>
                                    <i ng-if='opt.selected' class="icon ion-android-checkbox-outline"></i>
                                    <i ng-if='!opt.selected' class="icon ion-android-checkbox-outline-blank"></i>
                                </span>
                                <div class='col'>
                                    {{opt.name}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div ng-if='!report.lockedMessage && report.ratingRemarksOptions && report.showOtherRemarks'
                     class='nl-dlg-field-value'>
                     <input ng-model='report.otherRemarks' 
                        type='text' 
                        autofocus=''
                        tabindex='0'
                        placeholder='Provide additional remarks'>
                </div>
                <div ng-if='!report.lockedMessage && !report.ratingRemarksOptions'
                     class='nl-dlg-field-value'>
                     <input ng-model='report.remarksStr' 
                        type='text' 
                        autofocus=''
                        tabindex='0'
                        placeholder='Provide remarks'>
                </div>
				<div ng-if='!report.lockedMessage && report.validationErrorMsg' class='nl-dlg-field-errormsg'>
					{{report.validationErrorMsg}}
				</div>
                <div ng-if='report.bulkEntry' class='row row-center padding-mid margin0'>
                        <div class='col padding0'></div>
                    
                        <div class='nl-link-text nl-button-lowlight padding-small'
                             ng-click='hideBulkRatingMarker($event)'>Cancel</div>
                        <div class='padding-small'></div>
                        <div class='nl-link-text nl-button-highlight padding-small'
                             ng-click='bulkRatingMarker($event)'>Mark All</div>
                </div>
            </td>
        </tr>
    </table>
</div>
