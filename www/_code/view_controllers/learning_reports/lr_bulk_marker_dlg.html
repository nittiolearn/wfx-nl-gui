<nl-dlg dlgTitle='{{dlgTitle}}' show-help='0'>
<nl-dlg-content>
    <div ng-if='data.inputField' class='row row-center row-wrap margin0 padding-mid'>
        <input type='number' ng-model='data.inputval' min='0' max='100'></input>
    </div>
    <div ng-if='data.inputField && data.errorMsg' class='row row-center margin0 padding-mid'>
        <div class='nl-dlg-field-errormsg'> 
            {{data.errorMsg}}
        </div>
    </div>
    <div ng-if='data.milestone'>
        <div ng-if='data.errorMsg' class='row row-center margin0 padding-mid'>
            <div class='nl-dlg-field-errormsg'> 
                {{data.errorMsg}}
            </div>
        </div>
        <div class='row row-center row-wrap margin0 padding0 padding-mid'>
            <div ng-class='respCol211'>
                <div class='row row-center margin0 padding0'>
                    <div class='nl-dlg-field-name nl-min-250'>Milestone reached on</div>
                    <div class='nl-dlg-field-value w100'>
                        <nl-date-select fieldmodelbyref='data.reached'></nl-date-select>
                    </div>
                </div>
                <span></span>
            </div>
            <div ng-class='respCol211' class='padding-small'>
                <div class='row row-center margin0 padding0'>
                    <div class='col'></div>
                    <div class='nl-link-text nl-button-highlight' style='min-width:150px' ng-click='selectOn($event, data.selectedModule, "pending")'>Select pending</div>
                    <div class='padding-small'></div>
                    <div class='nl-link-text nl-button-highlight' ng-click='selectOn($event, data.selectedModule, "selectall")'>Select all</div>
                    <div class='padding-small'></div>
                    <div class='nl-link-text nl-button-highlight nl-min-125' ng-click='selectOn($event, data.selectedModule, "unselect")'>Unselect all</div>
                </div>
            </div>
        </div>
        <div class='padding-mid'>
            <table class='nl-table nl-table-styled3'>
                <tr class='header'>
                    <td style='width: 50px;'>
                    </td>
                    <td>
                        Learner Name
                    </td>
                    <td>
                        Learner Id
                    </td>
                    <td>
                        Milestone reached on
                    </td>
                    <td>
                        Status
                    </td>
                </tr>
                <tr ng-repeat='report in data.selectedModule.learningRecords'
                    ng-show='!report.bulkEntry'
                    class='{{report.lockedMessage ? "fgrey" : "clickable"}}'
                    ng-click='report.selectedLr = !report.selectedLr;'>
                    <td>
                        <div class='nl-link-text fsh5' ng-hide='report.lockedMessage'>
                            <i ng-show='report.selectedLr' class="icon ion-android-checkbox-outline black fsh6"></i>
                            <i ng-hide='report.selectedLr' class="icon ion-android-checkbox-outline-blank fsh6"></i>
                        </div>
                    </td>
                    <td>
                        {{report.learnername}}
                    </td>
                    <td>
                        {{report.learnerid}}
                    </td>
                    <td>
                        {{report.reached ? getFormattedDate(report.reached) : ""}}
                    </td>
                    <td>
                        <div>
                            <span ng-if='report.milestoneMarked && !report.lockedMessage'>
                                <i class="icon fsh4 ion-checkmark-circled fgreen"></i>
                                Marked
                            </span>
                            <span ng-if='!report.milestoneMarked && !report.lockedMessage'>
                                <i class="icon fsh4 ion-ios-circle-filled fyellow"></i>
                                Pending
                            </span>
                            <span ng-if='!report.milestoneMarked && report.lockedMessage'>
                                {{report.lockedMessage}}
                            </span>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div ng-if='data.attendance' style='min-width:900px'>
        <div ng-if='data.errorMsg' class='row row-center margin0 padding-mid'>
            <div class='nl-dlg-field-errormsg'> 
                {{data.errorMsg}}
            </div>
        </div>
        <div class='padding-mid'>
            <table class='nl-table nl-table-styled3'>
                <tr class='header'>
                    <td ng-if='isEtmAsd' class='nl-min-200'>
                        Date
                    </td>
                    <td ng-if='isEtmAsd' class='nl-min-200'>
                        Shift time
                    </td>
                    <td class='nl-min-300'>
                        Attendance Status
                    </td>
                    <td>
                        Remarks
                    </td>
                </tr>
                <tr>
                    <td ng-if='isEtmAsd'>
                        <div ng-if='data.attedance.id == "notapplicable"'>
                            Date not applicable
                        </div>
                        <div ng-if='data.attedance.id != "notapplicable"'>
                            <nl-date-select fieldmodelbyref='data.attMarkedOn'></nl-date-select>
                        </div>
                    </td>
                    <td ng-if='isEtmAsd'>
                        <div ng-if='data.attedance.id == "notapplicable"'>
                            Shift not applicable
                        </div>
                        <div class='row row-center padding0 margin0'
                            ng-if='data.attedance.id != "notapplicable"'>
                            <div class='nl-dlg-field-value'
                                style='min-width:50px'>
                                <select ng-model='data.shiftHrs' 
                                        ng-options='opt as opt.id for opt in options.shiftHrs track by opt.id'
                                        ng-change='onChangeTime(data)'
                                        class='w100'
                                        autofocus=''
                                        tabindex=""
                                        style='min-height: 34px'>
                                </select>
                            </div>
                            <div class='padding-small'>:</div>
                            <div class='nl-dlg-field-value'
                                style='min-width:50px'>
                                <select ng-model='data.shiftMins' 
                                        ng-options='opt as opt.id for opt in options.shiftMins track by opt.id'
                                        ng-change='onChangeTime(data)'
                                        autofocus=''
                                        tabindex=""
                                        style='min-height: 34px'>
                                </select>
                            </div>
                            <div class='padding-small'></div>
                            <div class='padding-small'>-</div>
                            <div class='padding-small'></div>
                            <div class='nl-xxx-select nl-dlg-field-value padding-mid'
                                style='min-width: 60px'>
                                {{data.shiftEnd}}
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class='nl-dlg-field-value'>
                            <select ng-model='data.attendance' 
                                class='w100'
                                ng-options='opt as opt.name for opt in options.attendanceOptions track by opt.id'
                                autofocus=''
                                tabindex='0'>
                            </select>
                        </div>
                    </td>
                    <td>
                        <div ng-if='options.attendanceRemarksOptions'
                            class='row row-center margin0 padding-mid nl-dlg-field-value'>
                            <select ng-model='data.remarks'
                                class='nl-select w100' 
                                ng-options='opt as opt.name for opt in options.attendanceRemarksOptions track by opt.id'
                                autofocus=''
                                tabindex='0'>
                            </select>
                        </div>
                        <div ng-if='options.attendanceRemarksOptions && data.remarks.id == "Other"'
                            class='row row-center margin0 padding-mid nl-dlg-field-value'>
                            <input ng-model='data.otherRemarks' 
                                type='text' 
                                class='nl-input w100'
                                autofocus=''
                                tabindex='0'
                                placeholder='Provide additional remarks'>
                        </div>
                        <div ng-if='!options.attendanceRemarksOptions'
                            class='row row-center margin0 padding-mid nl-dlg-field-value'>
                            <input ng-model='data.remarks.id' 
                                class='nl-input w100'
                                autofocus=''
                                tabindex='0'
                                placeholder='Provide remarks'>
                        </div>
                    </td>
                </tr>
            </table>
        </div>        
        <div class='row row-center margin0 padding-mid'>
            <div class='col'></div>
            <div class='nl-link-text nl-button-highlight' style='min-width:150px' ng-click='selectOn($event, data.selectedModule, "pending")'>Select pending</div>
            <div class='padding-small'></div>
            <div class='nl-link-text nl-button-highlight' ng-click='selectOn($event, data.selectedModule, "selectall")'>Select all</div>
            <div class='padding-small'></div>
            <div class='nl-link-text nl-button-highlight nl-min-125' ng-click='selectOn($event, data.selectedModule, "unselect")'>Unselect all</div>
        </div>
        <div class='padding-mid'>
            <table class='nl-table nl-table-styled3'>
                <tr class='header'>
                    <td style='width: 50px;'>
                    </td>
                    <td>
                        <div>Learner Name</div>
                        <div ng-if='isEtmAsd'>(Learner Id)</div>
                    </td>
                    <td ng-if='!isEtmAsd'>
                        Learner id
                    </td>
                    <td ng-if='isEtmAsd' class='nl-min-125'>
                        Date
                    </td>
                    <td ng-if='isEtmAsd' class='nl-min-125'>
                        Shift
                    </td>
                    <td class='nl-min-125'>
                        Status
                    </td>
                    <td>
                        Remarks
                    </td>
                </tr>
                <tr ng-repeat='report in data.selectedModule.learningRecords'
                    ng-show='!report.bulkEntry'
                    class='{{report.lockedMessage ? "fgrey" : "clickable"}}'
                    ng-click='report.selectedLr = !report.selectedLr;'>
                    <td>
                        <div class='nl-link-text fsh5' ng-if='!report.lockedMessage'>
                            <i ng-show='report.selectedLr' class="icon ion-android-checkbox-outline black fsh6"></i>
                            <i ng-hide='report.selectedLr' class="icon ion-android-checkbox-outline-blank fsh6"></i>
                        </div>
                    </td>
                    <td>
                        <div>{{report.learnername}}</div>
                        <div ng-if='isEtmAsd'> ({{report.learnerid}})</div>
                    </td>
                    <td ng-if='!isEtmAsd'>
                        {{report.learnerid}}
                    </td>
                    <td ng-if='isEtmAsd'>
                        <div ng-if='!report.lockedMessage'>{{report.attMarkedOn ? getFormattedDate(report.attMarkedOn) : ""}}</div>                        
                    </td>
                    <td ng-if='isEtmAsd'>
                        <div ng-if='!report.lockedMessage' 
                            class='row row-center padding0 margin0'>
                            <div class='nl-dlg-field-value'>
                                {{report.shiftHrs.id}}:{{report.shiftMins.id}}-{{report.shiftEnd}}
                            </div>
                        </div>
                    </td>
                    <td>
                        <div ng-if='!report.lockedMessage'>{{report.attendance.name || ''}}</div>
                    </td>
                    <td>
                        <div ng-if='!report.lockedMessage'>{{report.remarks.id || report.otherRemarks || ""}}</div>
                        <div ng-if='!report.lockedMessage && report.remarks.id == "Other"' class='fsmall1'>{{report.otherRemarks || ""}}</div>
                        <div ng-if='report.lockedMessage'>{{report.lockedMessage}}</div>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</nl-dlg-content>
</nl-dlg>