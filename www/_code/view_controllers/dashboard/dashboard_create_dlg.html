<nl-dlg title='{{dlgTitle}}'>
    <nl-dlg-help>
        <h2>Dashboard properties</h2>
        <ul>
            <li><b>description:</b> Mandatory - provide a short description which will help others to understand the purpose of this dashboard.</li>
            <li><b>content:</b> Mandatory - dashboard content in JSON format as described below.</li>
        </ul>
        
        <h2>Dashboard content JSON format</h2>
        <p>Dashboard is an array of objects.</p>
        <p><b>Hint:</b> <a href='http://www.jsoneditoronline.org/'>http://www.jsoneditoronline.org/</a> provides a good tool for editing JSON strings.</p>

        <h3>An example</h3>
        <p> The attributes 'linkid', 'action' and 'title' are mandatory attributes. 'icon', 'help' and 'urlParams' are optional.</p>
        <pre>
[
 {
  "linkid": "card1", 
  "action": "lesson.view_approved",
  "title": "Card 1 Title",
  "icon": "http://icon_path.png", 
  "help": "Card 1 Help",
  "urlParams": "custtype=8"
 }
]
        </pre>
        
        <h3>Defining dashboard cards and links (parent/child relationship)</h3>
        <pre>
[
  {"linkid": "card1", "action": "lesson.view_approved", "title": "Card 1 Title"},
  {"linkid": "card1.link1", "action": "lesson.create", "title": "Link 1 Title"},
  {"linkid": "card1.link2", "action": "lesson.view_approved", "title": "Link 2 Title"},
  {"linkid": "card2", "action": "lesson.view_approved", "title": "Card 2 Title"},
]
        </pre>
        <p><b>"parentid.childid"</b>: linkid attribute is used to determine parent child relationship. linkid of the child element should always begin with the id of parent element and a ".".</p>
        <p>In the above example, 2 cards are specified: 'card1' and 'card2'. 'card1' contains 2 links: 'link1' and 'link2'. 'card2' is empty.</p>

        <h3>'action' attribute</h3>
        <p>Permission for the card/link and the URL is derived from the 'action' attribute. One of the predefined list from the server can be used for this attribute. There are three kinds of actions:</p>
        <ul>
            <li><b>Actions with fixed URLs:</b> the URL for the card/link is drived from the action. These do not support customization of the URL with "urlParams" attribute.</li>
            <li><b>Actions with customizable URLs:</b> the URL for the card/link may be customizaed with "urlParams" attribute.</li>
            <li><b>Generic actions with fully customizable URLs:</b> In this case, the urlParms is taken as a complete URL. This could be used for external links. <b>Please do not use this for internal links.</b></li>
        </ul>
        <h4>Action with fixed URLs</h4>
        <table class='nl-table nl-table-styled'>
            <tr><th>Action</th><th>URL</th><th>Permission</th><th>Remarks</th></tr>
            <tr><td>grpadmin.view</td><td>/admin_group/group_view/</td><td>admin_group</td><td>Group administration only for admin.nittio</td></tr>
            <tr><td>grpadmin.create</td><td>/admin_group/group_create/</td><td>admin_group</td><td></td></tr>
            <tr><td>grpadmin.bulk</td><td>/admin_group/group_bulkupdate/</td><td>admin_group</td><td></td></tr>
            <tr><td>grpadmin.extras</td><td>/nittio_admin/extras/</td><td>admin_group</td><td></td></tr>
            <tr><td>help.training</td><td>/info/training/</td><td>basic_access</td><td>Help card is accessible for all logged in users.</td></tr>
            <tr><td>help.about </td><td>/#/welcome</td><td> </td><td>Accessible even if no user is logged in</td></tr>
            <tr><td>help.issue </td><td>/info/help_issue_new/</td><td> basic_access</td><td></td></tr>
            <tr><td>help.eula </td><td>/info/eula/</td><td> basic_access</td><td></td></tr>
            <tr><td>help.debug </td><td>/#/debug</td><td> debug_client</td><td></td></tr>
            <tr><td>mentor_desk.mentor </td><td>/#/forum?forumtype=1&refid=0</td><td> #is_mentor </td><td>Mentor view</td></tr>
            <tr><td>mentor_desk.mentee</td><td>/#/forum?forumtype=1&refid=1</td><td> #is_mentee </td><td>Mentee view - accessible from restricted terminals as well</td></tr>
            <tr><td>lesson.pagecategories</td><td>/ pagecategories /view/</td><td>lesson_create</td><td></td></tr>
            <tr><td>assign_desk</td><td>/#/assignment</td><td>basic_access</td><td>Assignment desk items</td></tr>
            <tr><td>reports.view_rep_book</td><td>/reportbook/view_rep_book/</td><td>view_reportbook</td><td>Report card</td></tr>
            <tr><td>reports.rep_class</td><td>/reports/class_rep/</td><td>report_view</td><td></td></tr>
            <tr><td>reports.rep_sub</td><td>/reports/subject_rep /</td><td>report_view</td><td></td></tr>
            <tr><td>reports.rep_stu</td><td>/reports/student_rep/</td><td>report_view</td><td></td></tr>
            <tr><td>reports.stu_my</td><td>/reports/student_view/</td><td>report_my</td><td></td></tr>
            <tr><td>res.upload</td><td>/#/resource_list?type=upload</td><td>lesson_create</td><td>Resouce card</td></tr>
            <tr><td>res.my</td><td>/#/resource_list?type=my</td><td>lesson_create</td><td></td></tr>
            <tr><td>res.list</td><td>/#/resource_list?type=all{}</td><td>admin_user</td><td></td></tr>
            <tr><td>admin</td><td>/admin_user/home/</td><td>admin_basic</td><td>User administration accessible for all group admins</td></tr>
            <tr><td>admin.view</td><td>/admin_user/user_view/</td><td>admin_user</td><td></td></tr>
            <tr><td>admin.create</td><td>/admin_user/user_create/</td><td>admin_user</td><td></td></tr>
            <tr><td>admin.bulk</td><td>/admin_user/user_bulkupdate/</td><td>admin_user_bulk</td><td></td></tr>
            <tr><td>admin.termauth</td><td>/admin_user/term_authorization/</td><td>admin_terminal</td><td></td></tr>
            <tr><td>admin.audit</td><td>/#/audit</td><td>admin_user</td><td></td></tr>
            <tr><td>admin.impersonate</td><td>/#/impersonate</td><td>admin_ impersonate_grp</td><td></td></tr>
            <tr><td>admin.subgroupview</td><td>/admin_group/group_view/selfadmin</td><td>and:admin_group_selfadmin,#is_parent_group</td><td></td></tr>
            <tr><td>admin.custom_dashboards</td><td>/#/dashboard?my=0</td><td>admin_user</td><td></td></tr>
            <tr><td>admin.custom_dashboards_my</td><td>/#/dashboard?my=1</td><td>admin_user</td><td></td></tr>
            <tr><td>searchlist.my</td><td>/#/searchlist?my=1</td><td>admin_user</td><td></td></tr>
            <tr><td>searchlist.all</td><td>/#/searchlist?my=0</td><td>admin_user</td><td></td></tr>
        </table>

        <h4>Action with customizable URLs</h4>
        <p>where ever you see {} in the URL, it will be replaced by urlParams attribute if present. If you see multiple {} in the same url, you can give an array in URL params for replacement.</p>
        <table class='nl-table nl-table-styled'>
            <tr><th>Action</th><th>URL</th><th>Permission</th><th>Remarks</th></tr>
            <tr><td>dashboard.home </td><td>/#/home?{}</td><td>basic_access</td><td>Specify "parent=xxx" to launch one card of dashboard in a sperate page where each link becomes a card.</td></tr>
            <tr><td>lesson.view </td><td>/lesson/view/{}</td><td>lesson_view</td><td>Direct link to module. urlParams is the lessonId.</td></tr>
            <tr><td>lesson.self_assign </td><td>/lesson/do_report_selfassign?{}</td><td>lesson_view</td><td>Self assign module and start learning. urlParams is of form 'lessonid=nnnn&force=0|1'.</td></tr>
            <tr><td>lesson.view_approved </td><td>/#/lesson_list?type=approved&?{}</td><td>lesson_view</td><td>View approved list</td></tr>
            <tr><td>lesson.create</td><td>/#/lesson_list?type=new&{}</td><td>lesson_create</td><td>urlParams="search=xyz&grade=Grade 1&custtype=101&content=_include"</td></tr>
            <tr><td>lesson.create2</td><td>/lesson/create2/{}</td><td>lesson_create</td><td>Provide template id in urlParams to directly create module based on template</td></tr>
            <tr><td>lesson.upload_pdf</td><td>/#/upload_pdf?{}</td><td>lesson_create_adv</td><td>Provide "template=12345678" in the urlParams to customize this.</td></tr>
            <tr><td>lesson.manage</td><td>/#/lesson_list?type=manage&{}</td><td>lesson_approve</td><td>urlParams="search=xyz&grade=Grade 1&custtype=101&content=_include"</td></tr>
            <tr><td>lesson.my</td><td>/#/lesson_list?type=my&{}</td><td>lesson_create</td><td>urlParams="search=xyz&grade=Grade 1&custtype=101&content=_include"</td></tr>
            <tr><td>lesson.review</td><td>/#/lesson_list?type=review&{}</td><td>learn_review</td><td>urlParams="search=xyz&grade=Grade 1&custtype=101&content=_include"</td></tr>
            <tr><td>searchlist.view</td><td>/#/searchlist_view?id={}</td><td>basic_access</td><td></td></tr>
            <tr><td>assign_desk.create</td><td> /#/lesson_list?type=sendassignment&{}</td><td> assignment_send</td><td>urlParams="search=xyz&grade=Grade 1&custtype=101&content=_include"</td></tr>
            <tr><td>assign_desk.new</td><td>/#/assignment?type=new&{}</td><td> assignment_do</td><td>Accessible from restricted terminals as well. urlParams="search=xyz&custtype=101"</td></tr>
            <tr><td>assign_desk.past</td><td>/#/assignment?type=past&{}</td><td> assignment_do</td><td>Accessible from restricted terminals as well. urlParams="search=xyz&custtype=101"</td></tr>
            <tr><td>assign_desk.view</td><td>/#/assignment?type=sent&{}</td><td> assignment_send</td><td>urlParams="search=xyz&custtype=101"</td></tr>
            <tr><td>assign_desk.manage</td><td>/#/assignment?type=manage&{}</td><td> assignment_manage</td><td>urlParams="search=xyz&custtype=101"</td></tr>
            <tr><td>assign_desk.shared</td><td>/#/assignment?type=shared&{}</td><td> basic_access</td><td>urlParams="search=xyz&custtype=101"</td></tr>
            <tr><td>course.view_my</td><td>/#/course_list?my=1&{}</td><td> course_create </td><td>Course card items. urlParams could contain search and custtype filtering: e.g. "custtype=123", or "search=xxx" or "custtype=123&search=xxx"</td></tr>
            <tr><td>course.view_published</td><td>/#/course_list?{}</td><td> course_review </td><td></td></tr>
            <tr><td>course.view_assigned</td><td>/#/course_assign_list?{}</td><td> course_review </td><td></td></tr>
            <tr><td>course.do</td><td>/#/course_report_list?my=1&{}</td><td> course_do</td><td>urlParams="search=xyz&custtype=101". Accessible from restricted terminals as well</td></tr>
            <tr><td>rno.list</td><td>/#/rno_list?{}</td><td> basic_access</td><td>urlParams must contain role and metadata: "role=observe&metadata=12345678". Role could be observe, review or admin</td></tr>
            <tr><td>rno.view</td><td>/#/rno_view?{}</td><td> None</td><td>urlParams may contain hashkey: "hashkey=xxxx". Usually this is not customized.</td></tr>
            <tr><td>sco.export</td><td>/#/sco_export?{}</td><td> lesson_approve</td><td>urlParams may contain: "lessonid=3619".</td></tr>
            <tr><td>sco.import</td><td>/#/sco_import_list?{}</td><td> lesson_approve</td><td>urlParams may contain: "template=1234&search=xxx".</td></tr>
        </table>

        <h4>Generic actions with fully customizable URLs</h4>
        <table class='nl-table nl-table-styled'>
            <tr><th>Action</th><th>URL</th><th>Permission</th><th>Remarks</th></tr>
            <tr><td>none</td><td>{}</td><td></td><td>No action. Can be accessed even without login.</td></tr>
            <tr><td>logedin</td><td>{}</td><td></td><td>No action. Can be accessed after login.</td></tr>
            <tr><td>restricted</td><td>{}</td><td></td><td>No action. Can be accessed after login from restricted terminal.</td></tr>
            <tr><td>authorized</td><td>{}</td><td></td><td>No action. Can be accessed after login from authorhized terminal.</td></tr>
        </table>
        
        <h3>Defining icon for a card / link</h3>
        <p>'icon' attribute is optional. If not specified, the default is taken over from the action. It could be an external URL or an nittio resource URL or with place holders ({resurl}, {iconurl}) to access default Nittio resources and icons.</p>
        <pre>
[
  {"linkid": "card1", ... , "icon": "http://path/to/icon.png"},
  {"linkid": "card2", ... , "icon": "/resource/resview/123456-aax.png"},
  {"linkid": "card3", ... , "icon": "{resurl}/dashboard/help.png"},
  {"linkid": "card3", ... , "icon": "{resurl}/general/waiting.gif"},
  {"linkid": "card4", ... , "icon": "{iconurl}/BlueBalloons.png"}
]
		</pre>
            
        <h3>Extending the URL</h3>
        <p>'urlParams' attribute may be specified to extent the URL. When specified, the 'URL' from action parameter is suffixed with the urlParams to form the complete URL</p>
        <pre>
[
 ...
 {"linkid": "card1.link3", 
  "action": "lesson.view_approved",
  "title": "Link 3 Title",
  "help": "Link 3 Help",
  "urlParams": "custtype=8"
 }
]
		</pre>

        <h3>Setting general dashbaord properties</h3>
        <p>It is possible to specify general properties to dashboard. In this case, the first item in the dashboard should be with action "_properties" and can have other attributes as the properties.</p>
        Currently, below properties are supported:
        <ul>
            <li><b>bgimgs</b>: Set a list of background images which are randomly picked and displayed when home dashboard is shown.</li>
        </ul>
        <p>Example:</p>
        <pre>
[
 {"linkid": "_properties",
  "bgimgs": [
    "https://nittio-test.appspot.com/resource/resview/1455517354-bg1.png",
    "https://nittio-test.appspot.com/resource/resview/1455517375-bg2.png",
    "https://nittio-test.appspot.com/resource/resview/1455517409-bg3.png",
    "https://nittio-test.appspot.com/resource/resview/1455517425-bg4.png",
    "https://nittio-test.appspot.com/resource/resview/1455517445-bg5.png",
    "https://nittio-test.appspot.com/resource/resview/1455517469-bg6.png",
    "https://nittio-test.appspot.com/resource/resview/1455517482-bg7.png"
  ]
 },
 ...
]
        </pre>
    </nl-dlg-help>
    <nl-dlg-content>
        <table class='nl-table'>
            <tr ng-if='!data.readonly' nl-form-textarea fieldname='description' fieldmodel='description' fieldcls='small'></tr>
            <tr nl-form-textarea fieldname='content' fieldmodel='content' fieldcls='nl-fixed-width'></tr>
        </table>
        <br/>
    </nl-dlg-content>
</nl-dlg>