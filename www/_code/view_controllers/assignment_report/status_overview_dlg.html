<nl-dlg title='Status overview' show-help='0' show-close='1'>
<nl-dlg-content>
    <div class='row row-center margin0 padding0'
         style='height: 36px; overflow: hidden; border-bottom: 1px solid rgba(0, 0, 0, 0.1)'>
        <div class='col fsh6 padding0 fyellow'>
            <div ng-show='filtersPresent'>
                <i class="icon ion-alert-circled"></i> One or more filters are applied.
            </div>
        </div>
        <span title='Filter'
              class='nl-toolbar-icon'
              ng-click='onFilter($event)'>
            <i class="icon ion-funnel"></i>
        </span>
    </div>

    <div class='padding-mid'></div>
    <div>
        <div>
            <div class='fsh3 text-center'>
                <span ng-show='stats.passed + stats.failed < stats.students'
                >{{stats.passed + stats.failed}} of </span><span
                >{{stats.students}} completed</span>
            </div>
            <div class='text-center padding-vertical' style='height: 400px'>
                <canvas class="chart chart-doughnut"
                        chart-data="data.completionData"
                        chart-labels="data.completionLabel"
                        chart-colours="data.completionColor">
                </canvas>
            </div>
        </div>

        <div ng-show='stats.totalMaxScore > 0 && stats.totalScore > 0'>
            <div class='fsh3 text-center'>
                Average score: {{stats.avgPerc}}%
            </div>
            <div class='text-center padding-vertical' style='height: 400px'>
                <canvas
                    class="chart chart-bar"
                    chart-data="data.percDistData"
                    chart-labels="data.percDistLabel"
                    chart-series="['series A']">
                </canvas>
            </div>
        </div>              
 
        <div ng-show='showLeaderBoard'>
            <div class='fsh3 text-center padding-mid'>
                <span ng-show='stats.totalMaxScore > 0'>Leaderboard</span>
                <span ng-show='stats.totalMaxScore == 0'>Completion status</span>
            </div>
            <div class='nl-div-table'>
                <div class='tr'>
                    <div class='th padding-mid'></div>
                    <div class='th padding-mid'>Name</div>
                    <div class='th padding-mid text-right' ng-hide='stats.reptype == "assignment"'>Completed</div>
                    <div class='th padding-mid text-right' ng-hide='stats.reptype == "assignment"'>Pending</div>
                    <div class='th padding-mid text-right'>
                        <div ng-show='stats.totalMaxScore > 0'>Score</div>
                        <div ng-show='stats.totalMaxScore == 0'>Status</div>
                    </div>
                </div>
                <div ng-repeat='student in stats.leaderBoard track by student.id'
                     class='tr'>
                    <div class='td padding-mid text-right'>{{$index+1}}</div>
                    <div class='td padding-mid'>
                        <a ng-href='/lesson/review_report_assign/{{student.repid}}'
                           ng-show='student.repid'>{{student.name}}</a>
                        <span ng-hide='student.repid'>{{student.name}}</span>
                    </div>
                    <div class='td padding-mid text-right' ng-hide='stats.reptype == "assignment"'>
                        {{student.done}}
                    </div>
                    <div class='td padding-mid text-right' ng-hide='stats.reptype == "assignment"'>
                        {{student.total - student.done}}
                    </div>
                    <div class='td padding-mid text-right'>
                        <div ng-show='student.perc >= 0'>{{student.perc}}%</div>
                        <div ng-show='student.perc == -1'>Completed</div>
                        <div ng-show='student.perc == -2'>Partially completed</div>
                        <div ng-show='student.perc == -3'>Not completed</div>
                    </div>
                </div>
            </div>
        </div>        
    </div>
</nl-dlg-content>
</nl-dlg>