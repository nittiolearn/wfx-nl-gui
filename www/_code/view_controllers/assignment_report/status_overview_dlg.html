<nl-dlg title='Status overview'>
<nl-dlg-content>
    <div class='row row-center margin0 padding0'
         style='height: 36px; overflow: hidden; border-bottom: 1px solid rgba(0, 0, 0, 0.1)'>
        <div class='col fsh6 padding0 fyellow'>
            <div ng-show='filtersPresent'>
                <i class="icon ion-alert-circled"></i> One or more filters are applied.
            </div>
        </div>
        <span title='Filter'
              class='nl-toolbar-icon'
              ng-click='onFilter($event)'>
            <i class="icon ion-funnel"></i>
        </span>
    </div>

    <div class='padding-mid'></div>
    <div>
        <div>
            <div class='fsh3 text-center'>
                <span ng-show='stats.passed + stats.failed < stats.total'
                >{{stats.passed + stats.failed}} of </span><span
                >{{stats.students}} completed</span>
            </div>
            <div class='text-center padding-vertical' style='height: 400px'>
                <canvas class="chart chart-doughnut"
                        chart-data="data.completionData"
                        chart-labels="data.completionLabel"
                        chart-colours="data.completionColor">
                </canvas>
            </div>
        </div>

        <div ng-show='stats.totalMaxScore > 0 && stats.totalScore > 0'>
            <div class='fsh3 text-center'>
                Average score: {{stats.avgPerc}}%
            </div>
            <div class='text-center padding-vertical' style='height: 400px'>
                <canvas
                    class="chart chart-bar"
                    chart-data="data.percDistData"
                    chart-labels="data.percDistLabel"
                    chart-series="['series A']">
                </canvas>
            </div>
        </div>              
 
        <div ng-show='showLeaderBoard'>
            <div class='fsh3 text-center'>
                <span ng-show='stats.totalMaxScore > 0'>Leaderboard</span>
                <span ng-show='stats.totalMaxScore == 0'>Completion status</span>
            </div>
            <table class='nl-table nl-table-styled'>
                <tr>
                    <th></th>
                    <th>Name</th>
                    <th style='text-align: right'>
                        <div ng-show='stats.totalMaxScore > 0'>Score</div>
                        <div ng-show='stats.totalMaxScore == 0'>Status</div>
                    </th>
                </tr>
                <tr ng-repeat='student in stats.leaderBoard track by student.id'>
                    <td>{{$index+1}}</td>
                    <td>
                        <a ng-href='/lesson/review_report_assign/{{student.repid}}'
                           ng-show='student.repid'>{{student.name}}</a>
                        <span ng-hide='student.repid'>{{student.name}}</span>
                    </td>
                    <td style='text-align: right'>
                        <div ng-show='student.perc >= 0'>{{student.perc}}%</div>
                        <div ng-show='student.perc == -1'>Completed</div>
                        <div ng-show='student.perc == -2'>Partially completed</div>
                        <div ng-show='student.perc == -3'>Not completed</div>
                    </td>
                </tr>
            </table>
        </div>        
    </div>
</nl-dlg-content>
</nl-dlg>