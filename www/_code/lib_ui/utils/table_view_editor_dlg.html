<nl-dlg dlgtitle='Customize Views' show-help='0' show-close='1'>
    <nl-dlg-content>
        <div class="row row-top row-wrap row-stretch margin0 padding0" style='min-height: 100%'>
            <div ng-class='$root.resp2Col33' class='padding0 nl-border-right'>
                <div class='fsh5 padding-mid'>Views</div>
                <div ng-repeat='view in views track by $index'
                     class='padding-mid nl-link-text2 {{view.id == selectedView.id ? "nl-left-tab-selected" : "nl-left-tab"}}'>
                     <div class='row row-center margin0 padding0'>
                         <div class='col' ng-click='onSelectView(view)'>
                              {{view.name}}
                         </div>
                         <div ng-click='onDeleteView(view)'>
                            <span class="nl-toolbar-icon" title='Delete view'>
                                <i class='icon ion-ios-trash fsh2 fblue2'></i>
                            </span>                             
                         </div>
                     </div>
                </div>
                <div class='padding-mid'>
                    <div class='row row-center margin0 padding0'>
                        <span class='col nl-dlg-field-value padding0'>
                            <input type='text' ng-model='data.newViewName'>
                        </span>
                        <span class='padding-small'></span>
                        <span class='add-new-button-style nl-link-text2' ng-click='onAddView()'>
                            Add
                        </span>
                    </div>
                </div>
            </div>
            <div ng-class='$root.resp2Col67' class='padding0'>
                <div ng-hide='selectedView' class='fsmall1 fgrey padding-mid'>
                    <span ng-show='views.length'>Please select a view.</span>
                    <span ng-hide='views.length'>Please add a new view.</span>
                </div>
                <div ng-show='selectedView' class='padding-mid'>

                    <!-- Edit field for view name -->
                    <div class='fsh5'>Modify {{selectedView.name}}:</div>
                    <div class='padding-small'></div>
                    <div class='nl-dlg-field-name'>View Name:</div>
                    <div class='nl-dlg-field-value'>
                        <input type='text' ng-model='selectedView.name'>
                    </div>

                    <!-- List of columns -->
                    <div class='padding-small'></div>
                    <div class='nl-dlg-field-name'>Select Columns:</div>
                    <div ng-repeat='column in selectedColumns track by $index'
                         class='padding-mid-v'>
                        <div class='bgdefault row row-center margin0 padding0'>
                            <div class='col padding-mid'>
                                {{column.name}}
                            </div>
                            <div ng-click='onColumnMoveUp($index)'
                                 ng-hide='$index == 0'>
                               <span class="nl-toolbar-icon" title='Move up'>
                                   <i class='icon ion-arrow-up-b fsh2 fblue2'></i>
                               </span>                             
                            </div>
                            <div ng-click='onColumnMoveDown($index)'
                                 ng-hide='$index == selectedColumns.length -1'>
                                <span class="nl-toolbar-icon" title='Move down'>
                                    <i class='icon ion-arrow-down-b fsh2 fblue2'></i>
                                </span>                             
                            </div>
                            <div ng-click='onColumnUnselect($index)'>
                               <span class="nl-toolbar-icon" title='Remove column'>
                                   <i class='icon ion-ios-trash fsh2 fblue2'></i>
                               </span>                             
                            </div>
                        </div>
                    </div>

                    <!-- Select box to add a column -->
                    <div class='padding-small'></div>
                    <div class='row row-center margin0 padding0'>
                        <div class='col padding0 nl-dlg-field-value'>
                            <select ng-model='data.selectedColumn' 
                                    ng-options='opt as opt.name for opt in notSelectedColumns track by opt.id'
                                    autofocus=''>
                            </select>
                        </div>
                        <span class='padding-small'></span>
                        <span class='add-new-button-style nl-link-text2' ng-click='onColumnSelect()'>
                            Add
                        </span>
                    </div>

                </div>
            </div>
        </div>
    </nl-dlg-content>
</nl-dlg>
