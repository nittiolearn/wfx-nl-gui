<!-- TODO-NOW: give a rearrange button which opens another window to reorder -->
<!-- TODO-NOW: move styles to nlapp.scss -->
<style>
    .nl-ion-list .item-content {
        padding: 0;
    }
    .nl-ion-list .item {
        font-size: 100%;
        border: none;
    }
    .nl-ion-list ion-reorder-button.button {
        min-height: 1.4rem;
    }
    .nl-ion-list .button.icon {
        min-width: auto;
    }
    .nl-ion-list .button.icon:before {
        font-size: 1.6rem;
        line-height: 1;
    }

    .nl-ion-list.disable-user-behavior {
        -webkit-user-select: auto;
        -moz-user-select: auto;
        -ms-user-select: auto;
        user-select: auto;
        -webkit-touch-callout: auto;
        -webkit-tap-highlight-color: transparent;
        -webkit-tap-highlight-color: transparent;
        -webkit-user-drag: auto;
        -ms-touch-action: auto;
        -ms-content-zooming: auto;
    }

    .nl-ion-list.disable-pointer-events {
        pointer-events: auto;
    }

    #reorderCustomizeViewColumns {
        top: auto;
        bottom: auto;
        left: auto;
        right: auto;
    }

    .nl-ion-list .item-right-edit {
        width: 30px;
        padding-left: 0;
    }

    .nl-icons {
        border-radius: 50%;
        padding-top: 0;
        padding-bottom: 0;
        padding-left: 2px;
        padding-right: 2px;
        font-size: 10px;
    }
</style>

<nl-dlg dlgtitle='Customize Views' show-help='0' show-close='1'>
    <nl-dlg-content>
        <div class="row row-top row-wrap row-stretch margin0 padding0" style='min-height: 100%'>
                <div ng-class='$root.resp2Col33' class='padding0 nl-border-right'>
                <div class='fsh5 padding-mid'>Views</div>
                <div ng-repeat='view in views track by $index'
                     class='padding-mid nl-link-text2 {{view.id == selectedView.id ? "nl-left-tab-selected" : "nl-left-tab"}}'>
                     <div class='row row-center margin0 padding0'>
                         <div class='col' ng-click='onSelectView(view)'>
                              {{view.name}}
                         </div>
                         <div ng-click='onDeleteView(view)'>
                            <span class="nl-toolbar-icon" title='Delete view'>
                                <i class='icon ion-ios-trash fsh2 fblue2'></i>
                            </span>                             
                         </div>
                     </div>
                </div>
                <div class='padding-mid'>
                    <div class='row row-center margin0 padding0'>
                        <span class='col nl-dlg-field-value padding0'>
                            <input type='text' ng-model='data.newViewName'>
                        </span>
                        <span class='padding-small'></span>
                        <span class='add-new-button-style nl-link-text2' ng-click='onAddView()'>
                            Add
                        </span>
                    </div>
                </div>
            </div>
            <div ng-class='$root.resp2Col67' class='padding0'>
                <div ng-hide='selectedView' class='fsmall1 fgrey padding-mid'>
                    <span ng-show='views.length'>Please select a view.</span>
                    <span ng-hide='views.length'>Please add a new view.</span>
                </div>
                <div ng-show='selectedView' class='padding-mid'>

                    <!-- Edit field for view name -->
                    <div class='fsh5'>Modify {{selectedView.name}}:</div>
                    <div class='padding-small'></div>
                    <div class='nl-dlg-field-name'>View Name:</div>
                    <div class='nl-dlg-field-value'>
                        <input type='text' ng-model='selectedView.name'>
                    </div>

                    <div class="padding-mid-v fbold">Columns you've added</div>
                    <ion-content id="reorderCustomizeViewColumns"></ion-content>
                    <ion-list show-reorder='true' class="nl-ion-list">
                        <ion-item ng-repeat='column in selectedColumns track by $index' class="padding-mid">
                            <i class='icon ion-minus-round forange padding-mid-x nl-icons border-circle-forange' 
                                ng-click="removeItem($index)"></i>
                            <span>{{column.name}}</span>
                            <ion-reorder-button class="ion-navicon"
                                                on-reorder="moveItem($fromIndex, $toIndex)">
                            </ion-reorder-button>
                        </ion-item>
                    </ion-list>

                    <div class="padding-mid-v fbold">Columns you can add</div>
                    <div ng-repeat='column in notSelectedColumns track by $index'
                         class='padding-mid-left padding-small-v'>
                        <div class='row row-center margin0 padding0'>
                            <i class='icon ion-plus-round fblue2 padding-small nl-icons border-circle-fblue2'
                                ng-click="onColumnAdd($index)"></i>
                            <div class='col' ng-show="renameCol == undefined || renameCol != $index">{{column.name}}</div>
                            <div class="col nl-display-inline-block" ng-show="renameCol != undefined && renameCol == $index">
                                <input type="text" ng-model="data.newName" tabindex="0">
                            </div>
                            <div class="nl-text-right">
                                <i class='icon ion-checkmark-round nl-dlg-field-icon padding-mid-left' ng-click='renameColDone($index)' 
                                    ng-show="renameCol != undefined && renameCol == $index"></i>
                                <i class='icon ion-ios-close nl-dlg-field-icon padding-mid-left' ng-click='renameColClose($index)' 
                                    ng-show="renameCol != undefined && renameCol == $index"></i>
                                <i class='icon ion-edit padding-mid-left' ng-click="renameColumn($index)" ng-show="renameCol == undefined || renameCol != $index"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nl-dlg-content>
</nl-dlg>
